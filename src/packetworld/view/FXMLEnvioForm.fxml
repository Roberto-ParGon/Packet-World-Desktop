<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>

<AnchorPane xmlns:fx="http://javafx.com/fxml/1" fx:controller="packetworld.controller.FXMLEnviosFormController"
            prefWidth="950.0" prefHeight="700.0" style="-fx-background-color: #f4f4f4;">
    <children>
        <HBox alignment="CENTER_LEFT" prefHeight="60.0" style="-fx-background-color: #2c3e50;" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <padding>
                <Insets left="20.0" />
            </padding>
            <children>
                <Label text="Gestión de Envíos" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="18.0" />
                    </font>
                </Label>
            </children>
        </HBox>

        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" AnchorPane.topAnchor="60.0" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
            <content>
                <VBox spacing="20.0" style="-fx-background-color: #f4f4f4;">
                    <padding>
                        <Insets top="20.0" right="30.0" bottom="20.0" left="30.0" />
                    </padding>
                    <children>
                        
                        <TitledPane text="Información General" collapsible="false" animated="false">
                            <content>
                                <GridPane hgap="15.0" vgap="15.0">
                                    <columnConstraints>
                                        <ColumnConstraints percentWidth="33" />
                                        <ColumnConstraints percentWidth="33" />
                                        <ColumnConstraints percentWidth="34" />
                                    </columnConstraints>
                                    <children>
                                        <VBox spacing="5.0" GridPane.columnIndex="0">
                                            <Label text="Número de Guía (Auto)" style="-fx-font-weight: bold;"/>
                                            <TextField fx:id="tfTracking" editable="false" promptText="Generado automáticamente" style="-fx-background-color: #e9ecef;"/>
                                        </VBox>
                                        <VBox spacing="5.0" GridPane.columnIndex="1">
                                            <Label text="Fecha de Creación" style="-fx-font-weight: bold;"/>
                                            <TextField fx:id="tfFecha" editable="false" style="-fx-background-color: #e9ecef;"/>
                                        </VBox>
                                        <VBox spacing="5.0" GridPane.columnIndex="2">
                                            <Label text="Estatus" style="-fx-font-weight: bold;"/>
                                            <ComboBox fx:id="cbEstado" maxWidth="Infinity"/>
                                        </VBox>
                                    </children>
                                </GridPane>
                            </content>
                        </TitledPane>

                        <HBox spacing="20.0">
                            <children>
                                <TitledPane text="Origen (Cliente / Sucursal)" collapsible="false" animated="false" HBox.hgrow="ALWAYS">
                                    <content>
                                        <GridPane hgap="15.0" vgap="15.0">
                                            <columnConstraints>
                                                <ColumnConstraints percentWidth="100" />
                                            </columnConstraints>
                                            <children>
                                                <VBox spacing="5.0" GridPane.rowIndex="0">
                                                    <Label text="Cliente Remitente" style="-fx-font-weight: bold;"/>
                                                    <ComboBox fx:id="cbCliente" maxWidth="Infinity" promptText="Seleccione un cliente..."/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.rowIndex="1">
                                                    <Label text="Sucursal de Origen" style="-fx-font-weight: bold;"/>
                                                    <ComboBox fx:id="cbSucursal" maxWidth="Infinity" promptText="Seleccione sucursal..."/>
                                                </VBox>
                                            </children>
                                        </GridPane>
                                    </content>
                                </TitledPane>

                                <TitledPane text="Destino" collapsible="false" animated="false" HBox.hgrow="ALWAYS">
                                    <content>
                                        <GridPane hgap="15.0" vgap="15.0">
                                            <columnConstraints>
                                                <ColumnConstraints percentWidth="50" />
                                                <ColumnConstraints percentWidth="50" />
                                            </columnConstraints>
                                            <children>
                                                <VBox spacing="5.0" GridPane.columnSpan="2" GridPane.rowIndex="0">
                                                    <Label text="Dirección de Entrega" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfDestino" promptText="Calle, Número, Colonia..."/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                                    <Label text="Ciudad" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfCiudadDestino"/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                                    <Label text="Estado" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfEstadoDestino"/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                                    <Label text="Nombre Destinatario" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfDestinatarioNombre"/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.columnIndex="1" GridPane.rowIndex="2">
                                                    <Label text="Teléfono Destinatario" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfDestinatarioTelefono"/>
                                                </VBox>
                                            </children>
                                        </GridPane>
                                    </content>
                                </TitledPane>
                            </children>
                        </HBox>

                        <TitledPane text="Detalle del Envío" collapsible="false" animated="false">
                            <content>
                                <VBox spacing="15.0">
                                    <children>
                                        <GridPane hgap="15.0" vgap="15.0">
                                            <columnConstraints>
                                                <ColumnConstraints percentWidth="50" />
                                                <ColumnConstraints percentWidth="50" />
                                            </columnConstraints>
                                            <children>
                                                <VBox spacing="5.0" GridPane.columnIndex="0">
                                                    <Label text="Peso Total / Inicial [kg]" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfPeso" promptText="Ej. 1.0"/>
                                                </VBox>
                                                <VBox spacing="5.0" GridPane.columnIndex="1">
                                                    <Label text="Costo Total Estimado ($)" style="-fx-font-weight: bold;"/>
                                                    <TextField fx:id="tfCosto" editable="false" promptText="Calculado al guardar" style="-fx-background-color: #e9ecef; -fx-font-weight: bold;"/>
                                                </VBox>
                                            </children>
                                        </GridPane>

                                        <VBox fx:id="boxDetallesPaquete" spacing="10.0" style="-fx-background-color: #e8f6f3; -fx-padding: 10; -fx-background-radius: 5; -fx-border-color: #d1f2eb; -fx-border-radius: 5;">
                                            <children>
                                                <Label text="Detalles del Paquete Inicial" style="-fx-font-weight: bold; -fx-text-fill: #16a085;"/>
                                                <GridPane hgap="15.0" vgap="10.0">
                                                    <columnConstraints>
                                                        <ColumnConstraints percentWidth="33" />
                                                        <ColumnConstraints percentWidth="33" />
                                                        <ColumnConstraints percentWidth="34" />
                                                    </columnConstraints>
                                                    <children>
                                                        <VBox spacing="2.0" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                                            <Label text="Alto (cm)"/>
                                                            <TextField fx:id="tfAlto" promptText="0.0"/>
                                                        </VBox>
                                                        <VBox spacing="2.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                                            <Label text="Ancho (cm)"/>
                                                            <TextField fx:id="tfAncho" promptText="0.0"/>
                                                        </VBox>
                                                        <VBox spacing="2.0" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                                            <Label text="Profundidad (cm)"/>
                                                            <TextField fx:id="tfProfundidad" promptText="0.0"/>
                                                        </VBox>
                                                        
                                                        <VBox spacing="2.0" GridPane.columnSpan="3" GridPane.rowIndex="1">
                                                            <Label text="Descripción del contenido"/>
                                                            <TextField fx:id="tfDescripcionPaquete" promptText="Ej. Documentos, Ropa, Electrónicos..."/>
                                                        </VBox>
                                                    </children>
                                                </GridPane>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </TitledPane>
                        
                        <HBox fx:id="driverBox" visible="false" managed="false" alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #fff3cd; -fx-border-color: #ffeeba; -fx-border-radius: 5; -fx-background-radius: 5;">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="Conductor Asignado:" style="-fx-font-weight: bold;"/>
                            <Label fx:id="lblAssignedDriver" text="Ninguno"/>
                            <Region HBox.hgrow="ALWAYS"/>
    
                            <Button fx:id="btnUnassignDriver" 
                                    text="Desasignar" 
                                    onAction="#handleUnassignDriver"
                                    style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-cursor: hand;"/>
                        </HBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>

        <HBox alignment="CENTER_RIGHT" spacing="15.0" prefHeight="60.0" style="-fx-background-color: #ecf0f1; -fx-border-color: #bdc3c7; -fx-border-width: 1 0 0 0;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
            <padding>
                <Insets right="30.0" />
            </padding>
            <children>
                <Button fx:id="btnCancel" text="Cancelar" onAction="#handleCancel" prefWidth="100.0" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-cursor: hand;"/>
                <Button fx:id="btnSave" text="Guardar Envío" onAction="#handleSave" prefWidth="140.0" style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
            </children>
        </HBox>
    </children>
</AnchorPane>